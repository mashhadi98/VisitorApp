# ุฑุงูููุง API ูุง Customer ู Order

ุงู ูุณุชูุฏ ุดุงูู ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ API ูุง ูุฏุฑุช ูุดุชุฑุงู ู ุณูุงุฑุดุงุช ุงุณุช.

## ๐ ููุฑุณุช ูุทุงูุจ

- [Customer APIs](#customer-apis)
- [Order APIs](#order-apis)
- [ูฺฉุงุช ููู](#ูฺฉุงุช-ููู)
- [ูููููโูุง ุงุณุชูุงุฏู](#ูููููโูุง-ุงุณุชูุงุฏู)

---

## ๐ฅ Customer APIs

### 1. ุงุฌุงุฏ ูุดุชุฑ ุฌุฏุฏ
**POST** `/api/Customers`

**Request Body:**
```json
{
  "fullName": "ุนู ุงุญูุฏ",
  "phoneNumber": "09123456789",
  "companyName": "ุดุฑฺฉุช ููููู",
  "isTemporary": false
}
```

**Response:**
```json
{
  "data": {
    "id": "guid",
    "fullName": "ุนู ุงุญูุฏ",
    "phoneNumber": "09123456789",
    "companyName": "ุดุฑฺฉุช ููููู",
    "isTemporary": false
  }
}
```

### 2. ุฏุฑุงูุช ูุดุชุฑ ุจุง ID
**GET** `/api/Customers/{id}`

### 3. ูุฑุงุด ูุดุชุฑ
**PUT** `/api/Customers/{id}`

**Request Body:**
```json
{
  "id": "guid",
  "fullName": "ุนู ุงุญูุฏ",
  "phoneNumber": "09123456789",
  "companyName": "ุดุฑฺฉุช ุฌุฏุฏ",
  "isTemporary": false
}
```

### 4. ุฏุฑุงูุช ูุณุช ุตูุญูโุจูุฏ ุดุฏู ูุดุชุฑุงู
**GET** `/api/Customers?page=1&pageSize=10`

**ุจุง ููุชุฑ:**
```json
{
  "page": 1,
  "pageSize": 10,
  "filter": {
    "fullName": "ุนู",
    "phoneNumber": "0912",
    "companyName": "ุดุฑฺฉุช",
    "isTemporary": false
  }
}
```

### 5. ุญุฐู ูุดุชุฑ
**DELETE** `/api/Customers/{id}`

---

## ๐ Order APIs

### 1. ุงุฌุงุฏ ุณูุงุฑุด ุฌุฏุฏ (ุจุง ูุณุช ุขุชูโูุง)
**POST** `/api/Orders`

**Request Body:**
```json
{
  "customerId": "guid",
  "orderDate": "2025-09-30T10:00:00Z",
  "status": 0,
  "items": [
    {
      "productId": "guid",
      "quantity": 2,
      "unitPrice": 1500000
    },
    {
      "productId": "guid",
      "quantity": 1,
      "unitPrice": 2500000
    }
  ]
}
```

**Response:**
```json
{
  "data": {
    "id": "guid",
    "orderNumber": "#00001",
    "customerId": "guid",
    "customerName": "ุนู ุงุญูุฏ",
    "orderDate": "2025-09-30T10:00:00Z",
    "totalAmount": 5500000,
    "status": 0,
    "items": [
      {
        "id": "guid",
        "productId": "guid",
        "productTitle": "ููพ ุชุงูพ",
        "quantity": 2,
        "unitPrice": 1500000,
        "totalPrice": 3000000
      }
    ]
  }
}
```

### 2. ุฏุฑุงูุช ุฌุฒุฆุงุช ุณูุงุฑุด (ุดุงูู ูุณุช ุขุชูโูุง)
**GET** `/api/Orders/{id}`

**Response:**
```json
{
  "data": {
    "id": "guid",
    "orderNumber": "#00001",
    "customerId": "guid",
    "customerName": "ุนู ุงุญูุฏ",
    "customerPhoneNumber": "09123456789",
    "orderDate": "2025-09-30T10:00:00Z",
    "totalAmount": 5500000,
    "status": 0,
    "statusText": "Pending",
    "items": [...]
  }
}
```

### 3. ูุฑุงุด ุณูุงุฑุด (ุจุง ูุณุช ุขุชูโูุง)
**PUT** `/api/Orders/{id}`

**Request Body:**
```json
{
  "id": "guid",
  "customerId": "guid",
  "orderDate": "2025-09-30T10:00:00Z",
  "status": 1,
  "items": [
    {
      "productId": "guid",
      "quantity": 3,
      "unitPrice": 1500000
    }
  ]
}
```

### 4. ุฏุฑุงูุช ูุณุช ุตูุญูโุจูุฏ ุดุฏู ุณูุงุฑุดุงุช
**GET** `/api/Orders?page=1&pageSize=10`

**ุจุง ููุชุฑ:**
```json
{
  "page": 1,
  "pageSize": 10,
  "filter": {
    "orderNumber": "#00001",
    "customerId": "guid",
    "status": 0,
    "orderDateFrom": "2025-09-01T00:00:00Z",
    "orderDateTo": "2025-09-30T23:59:59Z"
  }
}
```

### 5. ุฏุฑุงูุช ุณูุงุฑุดุงุช ฺฉุงุฑุจุฑ ุฌุงุฑ
**GET** `/api/Orders/my-orders?page=1&pageSize=10`

ุงู API ููุท ุณูุงุฑุดุงุช ฺฉู ุชูุณุท ฺฉุงุฑุจุฑ ูุงฺฏู ุดุฏู ุซุจุช ุดุฏูโุงูุฏ ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.

**ุจุง ููุชุฑ:**
```json
{
  "page": 1,
  "pageSize": 10,
  "filter": {
    "orderNumber": "#00001",
    "status": 0,
    "orderDateFrom": "2025-09-01T00:00:00Z",
    "orderDateTo": "2025-09-30T23:59:59Z"
  }
}
```

**Response:**
```json
{
  "data": {
    "items": [...],
    "totalCount": 10,
    "page": 1,
    "pageSize": 10
  }
}
```

**ูฺฉุชู ููู:** ุงู API ูุงุฒ ุจู ุงุญุฑุงุฒ ููุช ุฏุงุฑุฏ ุงูุง ูุงุฒ ุจู ููุด Admin ูุฏุงุฑุฏ. ูุฑ ฺฉุงุฑุจุฑ ูุงฺฏู ุดุฏู ูโุชูุงูุฏ ุณูุงุฑุดุงุช ุฎูุฏุด ุฑุง ูุดุงูุฏู ฺฉูุฏ.

### 6. ุญุฐู ุณูุงุฑุด
**DELETE** `/api/Orders/{id}`

---

## โ๏ธ ูฺฉุงุช ููู

### ูุถุนุชโูุง ุณูุงุฑุด (OrderStatus)
- `0` - Pending (ุฏุฑ ุงูุชุธุงุฑ)
- `1` - Confirmed (ุชุงุฏ ุดุฏู)
- `2` - Canceled (ูุบู ุดุฏู)

### ุซุจุช ฺฉุงุฑุจุฑ ุงุฌุงุฏ ฺฉููุฏู ุณูุงุฑุด
- ููฺฏุงู ุงุฌุงุฏ ุณูุงุฑุดุ **UserId** ฺฉุงุฑุจุฑ ุฌุงุฑ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุซุจุช ูโุดูุฏ
- ุงู ููุฏ ูุดุฎุต ูโฺฉูุฏ ฺฉุฏุงู ูุฒุชูุฑ ุณูุงุฑุด ุฑุง ุซุจุช ฺฉุฑุฏู ุงุณุช
- ุฏุฑ ุชูุงู response ูุงุ ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุซุจุช ฺฉููุฏู (`UserFullName`) ููุงุด ุฏุงุฏู ูโุดูุฏ

### ูุดุชุฑ ูุชูุฑูู
ุจุฑุง ุซุจุช ุณูุงุฑุดุงุช ุจุฏูู ูุดุชุฑ ูุดุฎุตุ ูโุชูุงูุฏ ฺฉ ูุดุชุฑ ูุชูุฑูู ุงุฌุงุฏ ฺฉูุฏ:
```json
{
  "fullName": "ูุดุชุฑ ูุชูุฑูู",
  "phoneNumber": "00000000000",
  "isTemporary": true
}
```

### ูุฏุฑุช ุขุชูโูุง ุณูุงุฑุด
- ุฏุฑ **ุงุฌุงุฏ ุณูุงุฑุด**: ูุณุช ุขุชูโูุง ุงูุฒุงู ุงุณุช (ุญุฏุงูู ฺฉ ุขุชู)
- ุฏุฑ **ูุฑุงุด ุณูุงุฑุด**: ุชูุงู ุขุชูโูุง ูุจู ุญุฐู ู ุขุชูโูุง ุฌุฏุฏ ุฌุงฺฏุฒู ูโุดููุฏ
- ุฏุฑ **ุฏุฑุงูุช ุฌุฒุฆุงุช**: ุชูุงู ุขุชูโูุง ุจู ููุฑุงู ุงุทูุงุนุงุช ูุญุตูู ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ
- **ููุช ฺฉู** ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุญุงุณุจู ูโุดูุฏ

### ุงุนุชุจุงุฑุณูุฌ
- ูุงู ู ูุงู ุฎุงููุงุฏฺฏ: ุงูุฒุงูุ ุญุฏุงฺฉุซุฑ 200 ฺฉุงุฑุงฺฉุชุฑ
- ุดูุงุฑู ุชููู: ุงูุฒุงูุ ุญุฏุงฺฉุซุฑ 20 ฺฉุงุฑุงฺฉุชุฑ
- ูุงู ุดุฑฺฉุช: ุงุฎุชุงุฑุ ุญุฏุงฺฉุซุฑ 200 ฺฉุงุฑุงฺฉุชุฑ
- ุชุนุฏุงุฏ ุขุชู: ุจุงุฏ ุจุฒุฑฺฏุชุฑ ุงุฒ ุตูุฑ ุจุงุดุฏ
- ููุช ูุงุญุฏ: ููโุชูุงูุฏ ููู ุจุงุดุฏ

---

## ๐ก ูููููโูุง ุงุณุชูุงุฏู

### ุณูุงุฑู 1: ุซุจุช ุณูุงุฑุด ฺฉุงูู

```bash
# 1. ุงุฌุงุฏ ูุดุชุฑ
POST /api/Customers
{
  "fullName": "ุฑุถุง ูุญูุฏ",
  "phoneNumber": "09121234567",
  "companyName": "ุดุฑฺฉุช ุชุณุช",
  "isTemporary": false
}
# Response: customerId = "abc123..."

# 2. ุงุฌุงุฏ ุณูุงุฑุด ุจุฑุง ุงู ูุดุชุฑ
POST /api/Orders
{
  "customerId": "abc123...",
  "orderDate": "2025-09-30T10:00:00Z",
  "status": 0,
  "items": [
    {
      "productId": "xyz456...",
      "quantity": 2,
      "unitPrice": 1500000
    }
  ]
}
# Response: orderId = "order789...", orderNumber = "#00001"

# 3. ูุดุงูุฏู ุฌุฒุฆุงุช ุณูุงุฑุด
GET /api/Orders/order789...
```

### ุณูุงุฑู 2: ูุฑุงุด ุณูุงุฑุด

```bash
# 1. ูุฑุงุด ุณูุงุฑุด ู ุชุบุฑ ุขุชูโูุง
PUT /api/Orders/order789...
{
  "id": "order789...",
  "customerId": "abc123...",
  "orderDate": "2025-09-30T10:00:00Z",
  "status": 1,
  "items": [
    {
      "productId": "xyz456...",
      "quantity": 5,
      "unitPrice": 1500000
    },
    {
      "productId": "def789...",
      "quantity": 1,
      "unitPrice": 3000000
    }
  ]
}
```

### ุณูุงุฑู 3: ุฌุณุชุฌู ุณูุงุฑุดุงุช

```bash
# ุฌุณุชุฌู ุณูุงุฑุดุงุช ฺฉ ูุดุชุฑ ุฎุงุต (ููุท Admin)
GET /api/Orders
{
  "page": 1,
  "pageSize": 10,
  "filter": {
    "customerId": "abc123...",
    "status": 0
  }
}

# ุฌุณุชุฌู ุณูุงุฑุดุงุช ุจุฑ ุงุณุงุณ ุจุงุฒู ุฒูุงู (ููุท Admin)
GET /api/Orders
{
  "page": 1,
  "pageSize": 10,
  "filter": {
    "orderDateFrom": "2025-09-01T00:00:00Z",
    "orderDateTo": "2025-09-30T23:59:59Z"
  }
}
```

### ุณูุงุฑู 4: ูุดุงูุฏู ุณูุงุฑุดุงุช ุดุฎุต (ฺฉุงุฑุจุฑ ุนุงุฏ)

```bash
# ูุฑ ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ููุท ุณูุงุฑุดุงุช ุฎูุฏุด ุฑุง ุจุจูุฏ
GET /api/Orders/my-orders?page=1&pageSize=10

# ุจุง ููุชุฑ ูุถุนุช
GET /api/Orders/my-orders
{
  "page": 1,
  "pageSize": 10,
  "filter": {
    "status": 0
  }
}

# ุจุง ููุชุฑ ุจุงุฒู ุฒูุงู
GET /api/Orders/my-orders
{
  "page": 1,
  "pageSize": 10,
  "filter": {
    "orderDateFrom": "2025-09-01T00:00:00Z",
    "orderDateTo": "2025-09-30T23:59:59Z"
  }
}
```

---

## ๐ง ุชุณุช API ูุง

ุจุฑุง ุชุณุช ุฑุงุญุชโุชุฑ API ูุง ูโุชูุงูุฏ ุงุฒ ูุงูโูุง `.http` ููุฌูุฏ ุงุณุชูุงุฏู ฺฉูุฏ:
- `Customers.http` - ุชุณุช API ูุง ูุดุชุฑ
- `Orders.http` - ุชุณุช API ูุง ุณูุงุฑุด

ุงู ูุงูโูุง ุฏุฑ Visual Studio Code ุจุง ุงูุฒููู REST Client ุง ุฏุฑ Rider ูุงุจู ุงุฌุฑุง ูุณุชูุฏ.

---

## ๐ ุงุฏุฏุงุดุชโูุง

### ุณุทูุญ ุฏุณุชุฑุณ
- **Admin APIs**: ุงุฌุงุฏุ ูุฑุงุดุ ุญุฐู ู ูุดุงูุฏู ููู ุณูุงุฑุดุงุช (ูุงุฒ ุจู Role: Admin)
- **User API**: ูุดุงูุฏู ุณูุงุฑุดุงุช ุดุฎุต `/api/Orders/my-orders` (ูุฑ ฺฉุงุฑุจุฑ ุงุญุฑุงุฒ ููุช ุดุฏู)

### ูฺฉุงุช ููู
- ุดูุงุฑู ุณูุงุฑุด ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ู ฺฉุชุง ุชููุฏ ูโุดูุฏ
- **UserId** ฺฉุงุฑุจุฑ ุงุฌุงุฏ ฺฉููุฏู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุซุจุช ูโุดูุฏ
- ุฏุฑ ุตูุฑุช ุญุฐู ุณูุงุฑุดุ ุชูุงู ุขุชูโูุง ุขู ูุฒ ุญุฐู ูโุดููุฏ (Cascade Delete)
- ุญุฐู ูุดุชุฑ ุฏุฑ ุตูุฑุช ูุฌูุฏ ุณูุงุฑุด ุงูฺฉุงูโูพุฐุฑ ูุณุช (Restrict Delete)
- ุญุฐู ฺฉุงุฑุจุฑุ ุณูุงุฑุดุงุช ูุฑุชุจุท ุฑุง ุญุฐู ููโฺฉูุฏ (UserId ุจู null ุชุจุฏู ูโุดูุฏ)
