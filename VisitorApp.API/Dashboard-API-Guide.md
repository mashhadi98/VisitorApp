# ุฑุงูููุง API ูุง ุฏุงุดุจูุฑุฏ

ุงู ูุณุชูุฏ ุดุงูู ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ API ูุง ุฏุงุดุจูุฑุฏ ู ฺฏุฒุงุฑุดโฺฏุฑ ุงุณุช.

## ๐ ููุฑุณุช ูุทุงูุจ

- [Dashboard Summary](#dashboard-summary)
- [Quick Order](#quick-order)
- [Sales Report](#sales-report)
- [Order Actions](#order-actions)
- [ูููููโูุง ุงุณุชูุงุฏู](#ูููููโูุง-ุงุณุชูุงุฏู)

---

## ๐ Dashboard Summary

### ุฏุฑุงูุช ุฎูุงุตู ุฏุงุดุจูุฑุฏ
**GET** `/api/dashboard/summary`

ุงู API ุงุทูุงุนุงุช ฺฉู ุฏุงุดุจูุฑุฏ ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.

**Query Parameters:**
- `month` (ุงุฎุชุงุฑ): ูุงู ููุฑุฏ ูุธุฑ ุจู ูุฑูุช `YYYY-MM` (ูุซุงู: `2025-09`)
  - ุงฺฏุฑ ุงุฑุณุงู ูุดูุฏุ ูุงู ุฌุงุฑ ุงุณุชูุงุฏู ูโุดูุฏ

**Response:**
```json
{
  "data": {
    "usersCount": 124,
    "productsCount": 89,
    "ordersThisMonth": 42,
    "salesThisMonth": 225000000
  }
}
```

**ููููู ุงุณุชูุงุฏู:**
```http
GET /api/dashboard/summary
GET /api/dashboard/summary?month=2025-09
```

---

## โก Quick Order (ุซุจุช ุณุฑุน ุณูุงุฑุด)

### ุซุจุช ุณุฑุน ุณูุงุฑุด
**POST** `/api/Orders/quick`

ุงู API ุงูฺฉุงู ุซุจุช ุณุฑุน ุณูุงุฑุด ุฑุง ูุฑุงูู ูโฺฉูุฏ ุจุง ูุงุจูุชโูุง ุฒุฑ:
- ุซุจุช ุณูุงุฑุด ุจุง ูุดุชุฑ ููุฌูุฏ
- ุซุจุช ุณูุงุฑุด ุจุง ุงุฌุงุฏ ูุดุชุฑ ุฌุฏุฏ
- ุซุจุช ุณูุงุฑุด ุจู ูุงู ฺฉุงุฑุจุฑ ุฏฺฏุฑ (ููุท Admin)

**Request Body:**
```json
{
  "userId": "guid|null",           // ุงุฎุชุงุฑ: ููุท Admin ูโุชูุงูุฏ
  "customerId": "guid|null",       // ุงุณุชูุงุฏู ุงุฒ ูุดุชุฑ ููุฌูุฏ
  "newCustomer": {                 // ุง ุงุฌุงุฏ ูุดุชุฑ ุฌุฏุฏ
    "fullName": "ุงุญูุฏ ุฑุถุง",
    "phoneNumber": "09123456789",
    "companyName": "ุดุฑฺฉุช ุชุณุช",     // ุงุฎุชุงุฑ
    "isTemporary": false
  },
  "items": [
    {
      "productId": "guid",
      "quantity": 2,
      "unitPrice": 1500000
    }
  ],
  "note": "ุชูุถุญุงุช ุงุฎุชุงุฑ"      // ุงุฎุชุงุฑ
}
```

**Response (201 Created):**
```json
{
  "data": {
    "orderId": "guid",
    "orderNumber": "#00001",
    "userId": "guid",
    "status": 0,
    "totalAmount": 3000000
  }
}
```

**ูฺฉุงุช ููู:**
- ุจุงุฏ ุญุฏุงูู ฺฉ ุงุฒ `customerId` ุง `newCustomer` ุงุฑุณุงู ุดูุฏ
- `userId` ููุท ุชูุณุท Admin ูุงุจู ุชูุธู ุงุณุช
- ุงฺฏุฑ `userId` ุงุฑุณุงู ูุดูุฏุ UserId ฺฉุงุฑุจุฑ ุฌุงุฑ ุงุณุชูุงุฏู ูโุดูุฏ
- ุญุฏุงูู ฺฉ ุขุชู ุงูุฒุงู ุงุณุช

**Errors:**
- `400 Bad Request`: ูุฑูุฏ ูุงูุนุชุจุฑ
- `403 Forbidden`: ุนุฏู ุฏุณุชุฑุณ ุจุฑุง ุซุจุช ุณูุงุฑุด ุจู ูุงู ฺฉุงุฑุจุฑ ุฏฺฏุฑ
- `404 Not Found`: ูุดุชุฑ ุง ูุญุตูู ุงูุช ูุดุฏ

---

## ๐ Sales Report (ฺฏุฒุงุฑุด ูุฑูุด)

### ฺฏุฒุงุฑุด ูุฑูุด ูุงูุงูู
**GET** `/api/reports/sales/monthly`

ุฏุฑุงูุช ฺฏุฒุงุฑุด ูุฑูุด ฺูุฏ ูุงู ฺฏุฐุดุชู.

**Query Parameters:**
- `months` (ุงุฎุชุงุฑุ ูพุดโูุฑุถ: 6): ุชุนุฏุงุฏ ูุงู ฺฏุฐุดุชู (ุญุฏุงฺฉุซุฑ 12)
- `year` (ุงุฎุชุงุฑ): ุณุงู ููุฑุฏ ูุธุฑ (ูุซุงู: 2025)

**Response:**
```json
{
  "data": {
    "series": [
      {
        "label": "ูุฑูุฑุฏู 2025",
        "value": 12500000
      },
      {
        "label": "ุงุฑุฏุจูุดุช 2025",
        "value": 18000000
      }
    ],
    "total": 30500000
  }
}
```

**ููููู ุงุณุชูุงุฏู:**
```http
GET /api/reports/sales/monthly
GET /api/reports/sales/monthly?months=6
GET /api/reports/sales/monthly?months=12&year=2025
```

---

## โ Order Actions (ุนููุงุช ุฑู ุณูุงุฑุด)

### 1. ุชุงุฏ ุณูุงุฑุด
**POST** `/api/Orders/{id}/confirm`

ุชุงุฏ ฺฉ ุณูุงุฑุด ู ุชุบุฑ ูุถุนุช ุขู ุจู Confirmed.

**Path Parameters:**
- `id`: ุดูุงุณู ุณูุงุฑุด

**Response (200 OK):**
```json
{
  "data": {
    "success": true,
    "message": "ุณูุงุฑุด ุจุง ููููุช ุชุงุฏ ุดุฏ"
  }
}
```

**Errors:**
- `404 Not Found`: ุณูุงุฑุด ุงูุช ูุดุฏ
- `400 Bad Request`: ุณูุงุฑุด ูุจูุงู ุชุงุฏ ุดุฏู ุง ูุบู ุดุฏู ุงุณุช

---

### 2. ูุบู ุณูุงุฑุด
**POST** `/api/Orders/{id}/cancel`

ูุบู ฺฉ ุณูุงุฑุด ู ุชุบุฑ ูุถุนุช ุขู ุจู Canceled.

**Path Parameters:**
- `id`: ุดูุงุณู ุณูุงุฑุด

**Response (200 OK):**
```json
{
  "data": {
    "success": true,
    "message": "ุณูุงุฑุด ุจุง ููููุช ูุบู ุดุฏ"
  }
}
```

**Errors:**
- `404 Not Found`: ุณูุงุฑุด ุงูุช ูุดุฏ
- `400 Bad Request`: ุณูุงุฑุด ูุจูุงู ูุบู ุดุฏู ุงุณุช

---

## ๐ก ูููููโูุง ุงุณุชูุงุฏู

### ุณูุงุฑู 1: ุฏุงุดุจูุฑุฏ ฺฉุงูู

```bash
# 1. ุฏุฑุงูุช ุฎูุงุตู ุฏุงุดุจูุฑุฏ
GET /api/dashboard/summary
Response: {
  "usersCount": 50,
  "productsCount": 120,
  "ordersThisMonth": 35,
  "salesThisMonth": 180000000
}

# 2. ูุดุงูุฏู ฺฏุฒุงุฑุด ูุฑูุด 6 ูุงู ุงุฎุฑ
GET /api/reports/sales/monthly?months=6
Response: {
  "series": [...],
  "total": 450000000
}
```

### ุณูุงุฑู 2: ุซุจุช ุณุฑุน ุณูุงุฑุด ุจุง ูุดุชุฑ ุฌุฏุฏ

```bash
# ุซุจุช ุณูุงุฑุด
POST /api/Orders/quick
{
  "newCustomer": {
    "fullName": "ุนู ูุญูุฏ",
    "phoneNumber": "09121234567",
    "isTemporary": false
  },
  "items": [
    {
      "productId": "abc-123...",
      "quantity": 2,
      "unitPrice": 1500000
    }
  ]
}

Response: {
  "orderId": "xyz-789...",
  "orderNumber": "#00042",
  "userId": "current-user-id",
  "status": 0,
  "totalAmount": 3000000
}
```

### ุณูุงุฑู 3: ูุฏุฑุช ุณูุงุฑุด

```bash
# 1. ุซุจุช ุณูุงุฑุด ุณุฑุน
POST /api/Orders/quick
{...}
Response: { "orderId": "order-123..." }

# 2. ูุดุงูุฏู ุฌุฒุฆุงุช ุณูุงุฑุด
GET /api/Orders/order-123...

# 3. ุชุงุฏ ุณูุงุฑุด
POST /api/Orders/order-123.../confirm
Response: { "success": true }

# ุง ูุบู ุณูุงุฑุด
POST /api/Orders/order-123.../cancel
Response: { "success": true }
```

### ุณูุงุฑู 4: Admin ุซุจุช ุณูุงุฑุด ุจู ูุงู ูุฒุชูุฑ

```bash
# Admin ูโุชูุงูุฏ ุณูุงุฑุด ุฑุง ุจู ูุงู ฺฉุงุฑุจุฑ ุฏฺฏุฑ ุซุจุช ฺฉูุฏ
POST /api/Orders/quick
{
  "userId": "visitor-user-id",
  "customerId": "customer-123...",
  "items": [
    {
      "productId": "product-456...",
      "quantity": 1,
      "unitPrice": 2000000
    }
  ]
}
```

---

## ๐ ุณุทูุญ ุฏุณุชุฑุณ

| API | ููุด ููุฑุฏ ูุงุฒ | ุชูุถุญุงุช |
|-----|--------------|---------|
| Dashboard Summary | Admin | ุฏุณุชุฑุณ ฺฉุงูู ุจู ุขูุงุฑ |
| Quick Order | Admin | ุซุจุช ุณูุงุฑุด ุณุฑุน |
| Sales Report | Admin | ฺฏุฒุงุฑุด ูุฑูุด |
| Confirm Order | Admin | ุชุงุฏ ุณูุงุฑุด |
| Cancel Order | Admin | ูุบู ุณูุงุฑุด |

---

## ๐ ูฺฉุงุช ููู

### Quick Order
- ุงฺฏุฑ `customerId` ู `newCustomer` ูุฑ ุฏู ุงุฑุณุงู ุดููุฏุ `customerId` ุงูููุช ุฏุงุฑุฏ
- `userId` ููุท ุชูุณุท Admin ูุงุจู ุชูุธู ุงุณุช
- ุงฺฏุฑ `userId` ุฎุงู ุจุงุดุฏุ ฺฉุงุฑุจุฑ ุฌุงุฑ ุงุณุชูุงุฏู ูโุดูุฏ
- ูุดุชุฑ ุฌุฏุฏ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฐุฎุฑู ูโุดูุฏ

### Order Status
- `0` = Pending (ุฏุฑ ุงูุชุธุงุฑ)
- `1` = Confirmed (ุชุงุฏ ุดุฏู)
- `2` = Canceled (ูุบู ุดุฏู)

### Sales Report
- ฺฏุฒุงุฑุด ุจุฑ ุงุณุงุณ `OrderDate` ูุญุงุณุจู ูโุดูุฏ
- ูุงูโูุง ูุงุฑุณ ููุงุด ุฏุงุฏู ูโุดููุฏ
- ุญุฏุงฺฉุซุฑ 12 ูุงู ูุงุจู ุฏุฑุงูุช ุงุณุช

---

## ๐ง ุชุณุช API ูุง

ูุงู `Dashboard.http` ุดุงูู ูููููโูุง ฺฉุงูู ุชุณุช ุงุณุช ฺฉู ุฏุฑ Visual Studio Code (ุจุง ุงูุฒููู REST Client) ุง Rider ูุงุจู ุงุฌุฑุง ุงุณุช.

---

## ๐ ุฎุทุงูุง ุฑุงุฌ

### 400 Bad Request
- ูุฑูุฏโูุง ุงูุฒุงู ุงุฑุณุงู ูุดุฏู
- ูุฑูุช ูุฑูุฏโูุง ูุงูุนุชุจุฑ ุงุณุช
- ุณูุงุฑุด ูุจูุงู ุชุงุฏ ุง ูุบู ุดุฏู

### 403 Forbidden
- ฺฉุงุฑุจุฑ ุนุงุฏ ููโุชูุงูุฏ `userId` ุชูุธู ฺฉูุฏ
- ููุท Admin ูโุชูุงูุฏ ุณูุงุฑุด ุฑุง ุจู ูุงู ุฏฺฏุฑุงู ุซุจุช ฺฉูุฏ

### 404 Not Found
- ุณูุงุฑุดุ ูุดุชุฑ ุง ูุญุตูู ุงูุช ูุดุฏ
- ID ูุง ุงุฑุณุงู ูุงูุนุชุจุฑ ูุณุชูุฏ

